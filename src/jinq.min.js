(function(n,t){if(typeof module!="undefined")module.exports=t();else if(typeof define=="function"&&typeof define.amd=="object")define(t);else{var i=this[n];this[n]=t();i&&(this[n].noConflict=i)}})("jinq",function(){function i(n){this.list=n||[];this.queue=[]}function n(n){return u(n)==="string"?function(t){return t[n]}:n}function u(n){return Object.prototype.toString.call(n).match(/\s([a-zA-Z]+)/)[1].toLowerCase()}function o(n,t){function f(n){return t?function(t,i){return t[n]>i[n]?-1:i[n]>t[n]?1:0}:function(t,i){return t[n]>i[n]?1:i[n]>t[n]?-1:0}}for(var r,i=n.length;i--;)r=n[i],u(r)!=="function"&&(n[i]=f(r));return function(t,i){for(var r=0,f=n.length,u;r<f;r++)if(u=n[r](t,i),u)return u;return 0}}function t(n){for(var r,t=n.list.slice(),i=0,u=n.queue.length;i<u;i++)r=n.queue[i],t=r[0].apply(t,r[1]);return t}function s(t,i){var f={},r,o,u,e;for(i=n(i),r=0,o=t.length;r<o;r++)u=t[r],e=i?i.call(t,u,r):u,f[e]?f[e].push(u):f[e]=[u];return f}function h(t,i){i=n(i);for(var r=0,u=t.length;r<u;r++)if(!i.call(t,t[r],r))break;return r}var f,e,r;i.prototype={aggregate:function(n,i){var u=i,o;if(n){var f=t(this),r=0,e=f.length;for(!i&&e&&(u=f[0],r=1);r<e;r++)o=f[r],u=n.call(f,u,o,r)}return u},all:function(i){var u,f,r;if(i=n(i)){for(u=t(this),f=u.length,r=0;r<f;r++)if(!i.call(u,u[r],r))return!1;return f>0}},any:function(n){return!!this.first(n)},average:function(){for(var r=t(this),n=r.length,i=0,u=n;u--;)i+=r[u];return n?i/n:i},contains:function(n){var i=t(this);return i.indexOf(n)!==-1},count:function(n){return this.toArray(n).length},elementAt:function(n){var i=t(this);if(n>0&&n<i.length)return i[n]},first:function(n){var t=this.toArray(n);if(t.length)return t[0]},last:function(n){var t=this.toArray(n),i=t.length;if(i)return t[i-1]},max:function(){for(var i,r=t(this),n=-Infinity,u=r.length;u--;)i=r[u],n<i&&(n=i);return n},min:function(){for(var i,r=t(this),n=Infinity,u=r.length;u--;)i=r[u],n>i&&(n=i);return n},sequenceEqual:function(n){var r,u,i;if(n&&(r=t(this),u=r.length,u===n.length)){for(i=0;i<u;i++)if(r[i]!==n[i])return!1;return!0}return!1},single:function(n){var t=this.toArray(n);if(t.length===1)return t[0]},sum:function(){for(var n=t(this),i=0,r=n.length;r--;)i+=n[r];return i},toArray:function(n){return n&&this.queue.push([f.where,arguments]),t(this)},toDictionary:function(i,r){var o=t(this),e,f,s,u,h;for(i=n(i),r=n(r),e={},f=0,s=o.length;f<s;f++)u=o[f],h=i?i(u):u,e[h]=r?r(u):u;return e},toLookup:function(n){return s(t(this),n)}};i.prototype.longCount=i.prototype.count;i.prototype.toList=i.prototype.toArray;f={concat:function(n){return this.concat(n)},defaultIfEmpty:function(n){return this.length?this:[n]},distinct:function(t){var u,f,i,o,r,e;for(t=n(t),u=[],f={},i=0,o=this.length;i<o;i++)(r=this[i],e=t?t.call(this,r,i):r,f[e])||(f[e]=!0,u.push(r));return u},except:function(t,i){i=n(i);for(var o=[],s={},r=0,e=t.length,u,f;r<e;r++)u=t[r],f=i?i.call(t,u,r):u,s[f]=!0;for(r=0,e=this.length;r<e;r++)u=this[r],f=i?i.call(this,u,r):u,s[f]||o.push(u);return o},groupBy:function(n){var t=s(this,n),i=[];for(var r in t)i.push({key:r,value:t[r]});return i},groupJoin:function(t,i,r,u){var c;if(i=n(i),r=n(r),i&&r){for(var l=[],s={},e=0,h=t.length,o,f;e<h;e++)o=t[e],f=r(o),f&&(s[f]?s[f].push(o):s[f]=[o]);for(e=0,h=this.length;e<h;e++)o=this[e],f=i(o),f&&(c=s[f],c&&l.push(u?u.call(this,o,s[f],e):c));return l}},intersect:function(t,i){i=n(i);for(var o=[],s={},r=0,e=t.length,u,f;r<e;r++)u=t[r],f=i?i.call(t,u,r):u,s[f]=!0;for(r=0,e=this.length;r<e;r++)u=this[r],f=i?i.call(this,u,r):u,s[f]&&o.push(u);return o},join:function(t,i,r,u){var s,h;if(i=n(i),r=n(r),i&&r){for(var a=[],c={},e=0,l=t.length,f,o;e<l;e++)f=t[e],o=r(f),o&&(c[o]=f);for(e=0,l=this.length;e<l;e++)if(f=this[e],o=i(f),o&&(s=c[o],s)){if(u)f=u.call(this,f,c[o],e);else for(h in s)f[h]||(f[h]=s[h]);a.push(f)}return a}},ofType:function(n){var i,t,f,r;for(n=n||"undefined",i=[],t=0,f=this.length;t<f;t++)r=this[t],u(r)===n&&i.push(r);return i},orderBy:function(n){return this.sort(n?o(arguments):n),this},orderByDescending:function(n){return this.sort(n?o(arguments,!0):function(n,t){return n>t?-1:t>n?1:0}),this},reverse:function(){for(var n=[],t=this.length;t--;)n.push(this[t]);return n},select:function(t){var r,i,u,f,e;if(t=n(t),t){for(r=[],i=0,u=this.length;i<u;i++)f=this[i],e=t.call(this,f,i),r.push(e);return r}},selectMany:function(t){var r,i,u,f,e;if(t=n(t),t){for(r=[],i=0,u=this.length;i<u;i++)f=this[i],e=t.call(this,f,i),r.concat(e);return r}},shuffle:function(){for(var n=this.length,t,i;n--;)t=Math.floor(Math.random()*(n+1)),i=this[n],this[n]=this[t],this[t]=i;return this},skip:function(n){return this.slice(n)},skipWhile:function(n){var t=h(this,n);return this.slice(t)},take:function(n){return this.slice(0,n)},takeWhile:function(n){var t=h(this,n);return this.slice(0,t)},union:function(t,i){i=n(i);for(var o=[],e={},r=0,s=this.length,u,f;r<s;r++)u=this[r],f=i?i.call(this,u,r):u,e[f]||(e[f]=!0,o.push(u));for(r=0,s=t.length;r<s;r++)u=t[r],f=i?i.call(t,u,r):u,e[f]||(e[f]=!0,o.push(u));return o},where:function(t){var r,i,f,u;if(t=n(t),t){for(r=[],i=0,f=this.length;i<f;i++)u=this[i],t.call(this,u,i)&&r.push(u);return r}},zip:function(t,i){var r;if(i=n(i),i){var u=[],f=this.length,e=t.length,o=f<e?f:e;for(r=0;r<o;r++){var s=this[r],h=t[r],c=i.call(this,s,h,r);u.push(c)}return u}}};for(e in f)i.prototype[e]=function(n){return function(){var t=new i(this.list);return t.queue=t.queue.concat(this.queue),t.queue.push([n,arguments]),t}}(f[e]);return r=function(n){return new i(arguments.length===1&&u(n)==="array"?n:Array.prototype.slice.call(arguments))},r.empty=function(){return new i},r.range=function(n,t){for(var i=[],u=n+t;n<u;n++)i.push(n);return r(i)},r.repeat=function(n,t){for(var i=[],u=0;u<t;u++)i.push(n);return r(i)},r});