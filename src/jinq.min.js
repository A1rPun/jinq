(function(n,t){if(typeof module!="undefined")module.exports=t();else if(typeof define=="function"&&typeof define.amd=="object")define(t);else{var i=this[n];this[n]=t();i&&(this[n].noConflict=i)}})("jinq",function(){function t(n,t){n?(this.list=n.list,this.queue=n.queue.slice(),t&&this.queue.push(t)):(this.list=[],this.queue=[])}var i,r,n;t.prototype={__makeOrderBy:function(n,t){function u(n){return t?function(t,i){return t[n]>i[n]?-1:i[n]>t[n]?1:0}:function(t,i){return t[n]>i[n]?1:i[n]>t[n]?-1:0}}for(var r,i=n.length;i--;)r=n[i],typeof r!="function"&&(n[i]=u(r));return function(t,i){for(var r=0,f=n.length,u;r<f;r++)if(u=n[r](t,i),u)return u;return 0}},__resolveQueue:function(){var n,i,t;for(this.list=this.list.slice(),n=0,i=this.queue.length;n<i;n++)t=this.queue[n],t[0].apply(this,t[1])},__toLookup:function(n){for(var t,u,i={},r=0,f=this.list.length;r<f;r++)t=this.list[r],u=n?n.call(this.list,t,r):t,i[u]?i[u].push(t):i[u]=[t];return i},__while:function(n){for(var t=0,i=this.list.length;t<i;t++)if(!n.call(this.list,this.list[t],t))break;return t},aggregate:function(n,t){var i=this,e;i.__resolveQueue();var r=t===0?0:t||null,u=0,f=i.list.length;if(f==0)return r;for(r===null&&(r=i.list[0],u=1),f=i.list.length;u<f;u++)e=i.list[u],r=n.call(i.list,r,e,u);return r},all:function(n){this.__resolveQueue();for(var t=0,i=this.list.length;t<i;t++)if(!n.call(this.list,this.list[t],t))return!1;return!0},any:function(n){return!!this.first(n)},average:function(){return this.sum()/this.list.length},contains:function(n){return this.__resolveQueue(),this.list.indexOf(n)!==-1},count:function(n){return this.toArray(n).length},elementAt:function(n){var t=this.toArray();return n<t.length?t[n]:null},first:function(n){var t=this.toArray(n),i=t.length;return i?t[0]:null},last:function(n){var t=this.toArray(n),i=t.length;return i?t[t.length-1]:null},max:function(){return this.__resolveQueue(),Math.max.apply(null,this.list)},min:function(){return this.__resolveQueue(),Math.min.apply(null,this.list)},single:function(n){var t=this.first(n);return this.list.length===1?t:null},sum:function(){var n,t;for(this.__resolveQueue(),n=0,t=this.list;t--;)n+=this.list[t];return n},toArray:function(n){return n&&this.queue.push([i.where,arguments]),this.__resolveQueue(),this.list},toDictionary:function(n,t){var u,r,f,i,e;for(this.__resolveQueue(),u={},r=0,f=this.list.length;r<f;r++)i=this.list[r],e=n?n(i):i,u[e]=t?t(i):i;return u},toLookup:function(n){return this.__resolveQueue(),this.__toLookup(n)}};i={concat:function(n){var t=this;t.list=t.list.concat.apply(t.list,n)},distinct:function(n){for(var r,u,t=this,f=[],e={},i=0,o=t.list.length;i<o;i++)(r=t.list[i],u=n?n.call(t.list,r,i):r,e[u])||(e[u]=!0,f.push(r));t.list=f},except:function(n,t){for(var u=this,o=[],s={},i=0,e=n.length,r,f;i<e;i++)r=n[i],f=t?t.call(n,r,i):r,s[f]=!0;for(i=0,e=u.list.length;i<e;i++)r=u.list[i],f=t?t.call(u.list,r,i):r,s[f]||o.push(r);u.list=o},groupBy:function(n){var t=this.__toLookup(n),i=[];for(var r in t)i.push({key:r,value:t[r]});this.list=i},intersect:function(n,t){for(var u=this,o=[],s={},i=0,e=n.length,r,f;i<e;i++)r=n[i],f=t?t.call(n,r,i):r,s[f]=!0;for(i=0,e=u.list.length;i<e;i++)r=u.list[i],f=t?t.call(u.list,r,i):r,s[f]&&o.push(r);u.list=o},join:function(n,t,i,r){for(var o=this,a=[],c={},f=0,l=n.length,u,e,s,h;f<l;f++)u=n[f],e=u[i],e&&(c[e]=u);for(f=0,l=o.list.length;f<l;f++)if(u=o.list[f],e=u[t],e&&(s=c[e],s)){if(r)u=r.call(o.list,u,c[e],f);else for(h in s)u[h]||(u[h]=s[h]);a.push(u)}o.list=a},orderBy:function(n){this.list.sort(n?this.__makeOrderBy(arguments):n)},orderByDescending:function(n){this.list.sort(n?this.__makeOrderBy(arguments,!0):function(n,t){return n>t?-1:t>n?1:0})},reverse:function(){for(var n=this,t=[],i=n.list.length;i--;)t.push(n.list[i]);n.list=t},select:function(n){for(var u,f,t=this,r=[],i=0,e=t.list.length;i<e;i++)u=t.list[i],f=n.call(t.list,u,i),r.push(f);t.list=r},selectMany:function(n){for(var u,f,t=this,r=[],i=0,e=t.list.length;i<e;i++)u=t.list[i],f=n.call(t.list,u,i),r.concat(f);t.list=r},shuffle:function(){for(var n=this.list.length,t,i;n--;)t=Math.floor(Math.random()*(n+1)),i=this.list[n],this.list[n]=this.list[t],this.list[t]=i},skip:function(n){this.list=this.list.slice(n)},skipWhile:function(n){var t=this.__while(n);this.list=this.list.slice(t)},take:function(n){this.list=this.list.slice(0,n)},takeWhile:function(n){var t=this.__while(n);this.list=this.list.slice(0,t)},union:function(n,t){for(var f=this,o=[],e={},i=0,s=f.list.length,r,u;i<s;i++)r=f.list[i],u=t?t.call(f.list,r,i):r,e[u]||(e[u]=!0,o.push(r));for(i=0,s=n.length;i<s;i++)r=n[i],u=t?t.call(n,r,i):r,e[u]||(e[u]=!0,o.push(r));f.list=o},where:function(n){for(var r,t=this,u=[],i=0,f=t.list.length;i<f;i++)r=t.list[i],n.call(t.list,r,i)&&u.push(r);t.list=u},zip:function(n,t){for(var r=this,u=[],f=r.list.length,e=n.length,o=f<e?f:e,i=0;i<o;i++){var s=r.list[i],h=n[i],c=t.call(r.list,s,h,i);u.push(c)}r.list=u}};for(r in i)t.prototype[r]=function(n){return function(){return new t(this,[n,arguments])}}(i[r]);return n=function(n){var i=new t;return i.list=n,i},n.empty=function(){return new t},n.range=function(t,i){for(var r=[],u=t+i;t<u;t++)r.push(t);return n(r)},n.repeat=function(t,i){for(var r=[],u=0;u<i;u++)r.push(t);return n(r)},n});