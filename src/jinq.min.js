(function(n,t){if(typeof module!="undefined")module.exports=t();else if(typeof define=="function"&&typeof define.amd=="object")define(t);else if(typeof angular!="undefined")angular.module("angular-"+n,[]).service("$"+n,function(){return t()});else{var i=this[n];this[n]=t();i&&(this[n].noConflict=i)}})("jinq",function(){function i(n){this.list=n||[];this.queue=[]}function u(n){return r(n)==="string"?function(t){return t[n]}:n}function r(n,t){return t?Object.prototype.toString.call(n).match(/\s([a-zA-Z]+)/)[1].toLowerCase():typeof n}function l(n){var t="",i;if(r(n)!=="object")return t+n;for(i in n)t+=i+n[i];return t}function h(n,t){function f(n){return t?function(t,i){return t[n]>i[n]?-1:i[n]>t[n]?1:0}:function(t,i){return t[n]>i[n]?1:i[n]>t[n]?-1:0}}for(var u,i=n.length;i--;)u=n[i],r(u)!=="function"&&(n[i]=f(u));return function(t,i){for(var r=0,f=n.length,u;r<f;r++)if(u=n[r](t,i),u)return u;return 0}}function t(n){for(var r,t=n.list.slice(),i=0,u=n.queue.length;i<u;i++)r=n.queue[i],t=r[0].apply(t,r[1]);return t}function n(n,t,i,r){var e={},o,h,f,s;for(i=u(i),r=u(r),o=0,h=t.length;o<h;o++)f=t[o],s=i?i(f,t):l(f),f=r?r(f):f,e[s]?n&&e[s].push(f):e[s]=n?[f]:f;return e}function c(n,t){t=u(t);for(var i=0,r=n.length;i<r;i++)if(!t(n[i],i))break;return i}var e="undefined",o,s,f;i.prototype={aggregate:function(n,i){var u=i,o;if(n){var f=t(this),r=0,e=f.length;for(!i&&e&&(u=f[0],r=1);r<e;r++)o=f[r],u=n(u,o,r)}return u},all:function(n){var r,f,i;if(n=u(n)){for(r=t(this),f=r.length,i=0;i<f;i++)if(!n(r[i],i))return!1;return f>0}},any:function(n){return!!this.first(n)},average:function(){for(var r=t(this),n=r.length,i=0,u=n;u--;)i+=r[u];return n?i/n:i},contains:function(n){var i=t(this);return i.indexOf(n)!==-1},count:function(n){return this.toArray(n).length},elementAt:function(n){var i=t(this);if(n>0&&n<i.length)return i[n]},first:function(n){var t=this.toArray(n);if(t.length)return t[0]},last:function(n){var t=this.toArray(n),i=t.length;if(i)return t[i-1]},max:function(){for(var i,r=t(this),n=-Infinity,u=r.length;u--;)i=r[u],n<i&&(n=i);return n},min:function(){for(var i,r=t(this),n=Infinity,u=r.length;u--;)i=r[u],n>i&&(n=i);return n},sequenceEqual:function(n){var r,u,i;if(n&&(r=t(this),u=r.length,u===n.length)){for(i=0;i<u;i++)if(r[i]!==n[i])return!1;return!0}return!1},single:function(n){var t=this.toArray(n);if(t.length===1)return t[0]},sum:function(){for(var n=t(this),i=0,r=n.length;r--;)i+=n[r];return i},toArray:function(n){return n&&this.queue.push([o.where,arguments]),t(this)},toDictionary:function(i,r){return n(!1,t(this),i,r)},toLookup:function(i,r){return n(!0,t(this),i,r)}};i.prototype.longCount=i.prototype.count;i.prototype.toList=i.prototype.toArray;o={concat:function(n){return n?this.concat(n):this},defaultIfEmpty:function(n){return this.length?this:[n]},distinct:function(t){var i=n(!1,this,t),r=[];for(var u in i)r.push(i[u]);return r},except:function(t,i){var u;if(!t)return this;var f=n(!1,this,i),s=n(!1,t,i),o=[];for(u in f)r(s[u])===e&&o.push(f[u]);return o},groupBy:function(t,i){var r=n(!0,this,t,i),u=[];for(var f in r)u.push({key:f,value:r[f]});return u},groupJoin:function(t,i,u,f){var o;if(!t||!f)return this;var s=n(!0,this,i),h=n(!0,t,u),c=[];for(o in s)r(h[o])!==e&&c.push(f?f(s[o],h[o]):s[o].concat(h[o]));return c},intersect:function(t){var i;if(!t)return this;var u=n(!1,this),o=n(!1,t),f=[];for(i in u)r(o[i])!==e&&f.push(u[i]);return f},join:function(t,i,u,f){var o,h,s,a,v;if(!t||!f)return this;var c=n(!1,this,i),l=n(!1,t,u),y=[];for(o in c)if(r(l[o])!==e){if(f)h=f(c[o],l[o]);else{h={};a=c[o];v=l[o];for(s in a)h[s]=a[s];for(s in v)h[s]=v[s]}y.push(h)}return y},ofType:function(n){var i,t,f,u;for(n=n||e,i=[],t=0,f=this.length;t<f;t++)u=this[t],r(u)===n&&i.push(u);return i},orderBy:function(n){return this.sort(n?h(arguments):n),this},orderByDescending:function(n){return this.sort(n?h(arguments,!0):function(n,t){return n>t?-1:t>n?1:0}),this},reverse:function(){for(var n=[],t=this.length;t--;)n.push(this[t]);return n},select:function(n){var i,t,r,f,e;if(n=u(n),!n)return this;for(i=[],t=0,r=this.length;t<r;t++)f=this[t],e=n(f,t),i.push(e);return i},selectMany:function(n){var i,t,r,f,e;if(n=u(n),!n)return this;for(i=[],t=0,r=this.length;t<r;t++)f=this[t],e=n(f,t),i.concat(e);return i},shuffle:function(){for(var n=this.length,t,i;n--;)t=Math.floor(Math.random()*(n+1)),i=this[n],this[n]=this[t],this[t]=i;return this},skip:function(n){return this.slice(n)},skipWhile:function(n){var t=c(this,n);return this.slice(t)},take:function(n){return this.slice(0,n)},takeWhile:function(n){var t=c(this,n);return this.slice(0,t)},union:function(t){var i;if(!t)return this;var u=n(!1,this),f=n(!1,t),r=[];for(i in u)r.push(u[i]);for(i in f)r.push(f[i]);return r},where:function(n){var i,t,f,r;if(n=u(n),!n)return this;for(i=[],t=0,f=this.length;t<f;t++)r=this[t],n(r,t)&&i.push(r);return i},zip:function(n,t){var i;if(t=u(t),!n||!t)return this;var r=[],f=this.length,e=n.length,o=f<e?f:e;for(i=0;i<o;i++){var s=this[i],h=n[i],c=t(s,h,i);r.push(c)}return r}};for(s in o)i.prototype[s]=function(n){return function(){var t=new i(this.list);return t.queue=t.queue.concat(this.queue),t.queue.push([n,arguments]),t}}(o[s]);return f=function(n){return new i(arguments.length===1&&r(n,1)==="array"?n:Array.prototype.slice.call(arguments))},f.empty=function(){return new i},f.range=function(n,t){for(var i=[],r=n+t;n<r;n++)i.push(n);return f(i)},f.repeat=function(n,t){for(var i=[],r=0;r<t;r++)i.push(n);return f(i)},f});